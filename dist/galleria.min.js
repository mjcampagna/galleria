!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){"use strict";!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("jquery")):t.Galleria=e(t,t.jQuery)}(window,function(t,e,i,n){var a,o,s,r,c,l,h,u,d,p,f,g,m,v,y,_,b,w,x,T=t.document,k=e(T),C=e(t),I=e,S=Array.prototype,A=!0,E=!1,z=navigator.userAgent.toLowerCase(),D=t.location.hash.replace(/#\//,""),L="file:"==t.location.protocol?"http:":t.location.protocol,$=Math,P=function(){},F=function(){return!1},H=!(t.screen.width>1279&&1==t.devicePixelRatio||t.screen.width>1e3&&t.innerWidth<.9*t.screen.width),O=function(){var t=3,e=T.createElement("div"),i=e.getElementsByTagName("i");do{e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e"}while(i[0]);return t>4?t:T.documentMode||n}(),M=function(){return{html:T.documentElement,body:T.body,head:T.getElementsByTagName("head")[0],title:T.title}},N=t.parent!==t.self,R="data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image",W=(y=[],e.each(R.split(" "),function(t,e){y.push(e),/_/.test(e)&&y.push(e.replace(/_/g,""))}),y),q=function(t){var i;return"object"!=typeof t||e.each(t,function(n,a){/^[a-z]+_/.test(n)&&(i="",e.each(n.split("_"),function(t,e){i+=t>0?e.substr(0,1).toUpperCase()+e.substr(1):e}),t[i]=a,delete t[n])}),t},U=function(t){return e.inArray(t,W)>-1?i[t.toUpperCase()]:t},V={youtube:{reg:/https?:\/\/(?:[a-zA_Z]{2,3}.)?(?:youtube\.com\/watch\?)((?:[\w\d\-\_\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\-\_]+))/i,embed:function(){return L+"//www.youtube.com/embed/"+this.id},get_thumb:function(t){return L+"//img.youtube.com/vi/"+this.id+"/default.jpg"},get_image:function(t){return L+"//img.youtube.com/vi/"+this.id+"/maxresdefault.jpg"}},vimeo:{reg:/https?:\/\/(?:www\.)?(vimeo\.com)\/(?:hd#)?([0-9]+)/i,embed:function(){return L+"//player.vimeo.com/video/"+this.id},getUrl:function(){return L+"//vimeo.com/api/v2/video/"+this.id+".json?callback=?"},get_thumb:function(t){return t[0].thumbnail_medium},get_image:function(t){return t[0].thumbnail_large}},dailymotion:{reg:/https?:\/\/(?:www\.)?(dailymotion\.com)\/video\/([^_]+)/,embed:function(){return L+"//www.dailymotion.com/embed/video/"+this.id},getUrl:function(){return"https://api.dailymotion.com/video/"+this.id+"?fields=thumbnail_240_url,thumbnail_720_url&callback=?"},get_thumb:function(t){return t.thumbnail_240_url},get_image:function(t){return t.thumbnail_720_url}},_inst:[]},j=function(i,n){for(var a=0;a<V._inst.length;a++)if(V._inst[a].id===n&&V._inst[a].type==i)return V._inst[a];this.type=i,this.id=n,this.readys=[],V._inst.push(this);var o=this;e.extend(this,V[i]),_videoThumbs=function(t){o.data=t,e.each(o.readys,function(t,e){e(o.data)}),o.readys=[]},this.hasOwnProperty("getUrl")?e.getJSON(this.getUrl(),_videoThumbs):t.setTimeout(_videoThumbs,400),this.getMedia=function(t,e,i){i=i||P;var n=this,a=function(i){e(n["get_"+t](i))};try{n.data?a(n.data):n.readys.push(a)}catch(t){i()}}},X=function(t){var e;for(var i in V)if((e=t&&V[i].reg&&t.match(V[i].reg))&&e.length)return{id:e[2],provider:i};return!1},B={support:(v=M().html,!N&&(v.requestFullscreen||v.msRequestFullscreen||v.mozRequestFullScreen||v.webkitRequestFullScreen)),callback:P,enter:function(t,e,i){this.instance=t,this.callback=e||P,(i=i||M().html).requestFullscreen?i.requestFullscreen():i.msRequestFullscreen?i.msRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullScreen&&i.webkitRequestFullScreen()},exit:function(t){this.callback=t||P,T.exitFullscreen?T.exitFullscreen():T.msExitFullscreen?T.msExitFullscreen():T.mozCancelFullScreen?T.mozCancelFullScreen():T.webkitCancelFullScreen&&T.webkitCancelFullScreen()},instance:null,listen:function(){if(this.support){var t=function(){if(B.instance){var t=B.instance._fullscreen;T.fullscreen||T.mozFullScreen||T.webkitIsFullScreen||T.msFullscreenElement&&null!==T.msFullscreenElement?t._enter(B.callback):t._exit(B.callback)}};T.addEventListener("fullscreenchange",t,!1),T.addEventListener("MSFullscreenChange",t,!1),T.addEventListener("mozfullscreenchange",t,!1),T.addEventListener("webkitfullscreenchange",t,!1)}}},G=[],Q=[],K=!1,Y=!1,Z=[],J=[],tt=function(t){J.push(t),e.each(Z,function(e,i){i._options.theme!=t.name&&(i._initialized||i._options.theme)||(i.theme=t,i._init.call(i))})},et={clearTimer:function(t){e.each(i.get(),function(){this.clearTimer(t)})},addTimer:function(t){e.each(i.get(),function(){this.addTimer(t)})},array:function(t){return S.slice.call(t,0)},create:function(t,e){e=e||"div";var i=T.createElement(e);return i.className=t,i},removeFromArray:function(t,i){return e.each(t,function(e,n){if(n==i)return t.splice(e,1),!1}),t},getScriptPath:function(t){var i=(t=t||e("script:last").attr("src")).split("/");return 1==i.length?"":(i.pop(),i.join("/")+"/")},animate:(d=function(e){var i,n="transition WebkitTransition MozTransition OTransition".split(" ");if(t.opera)return!1;for(i=0;n[i];i++)if(void 0!==e[n[i]])return n[i];return!1}((T.body||T.documentElement).style),p={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[d],f={_default:[.25,.1,.25,1],galleria:[.645,.045,.355,1],galleriaIn:[.55,.085,.68,.53],galleriaOut:[.25,.46,.45,.94],ease:[.25,0,.25,1],linear:[.25,.25,.75,.75],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},g=function(t,i,n){var a={};n=n||"transition",e.each("webkit moz ms o".split(" "),function(){a["-"+this+"-"+n]=i}),t.css(a)},m=function(t){g(t,"none","transition"),i.WEBKIT&&i.TOUCH&&(g(t,"translate3d(0,0,0)","transform"),t.data("revert")&&(t.css(t.data("revert")),t.data("revert",null)))},function(n,a,v){if(v=e.extend({duration:400,complete:P,stop:!1},v),n=e(n),!v.duration)return n.css(a),void v.complete.call(n[0]);d?(v.stop&&(n.off(p),m(n)),o=!1,e.each(a,function(t,e){u=n.css(t),et.parseValue(u)!=et.parseValue(e)&&(o=!0),n.css(t,u)}),o?(s=[],r=v.easing in f?f[v.easing]:f._default,c=" "+v.duration+"ms cubic-bezier("+r.join(",")+")",t.setTimeout(function(t,n,a,o){return function(){t.one(n,function(t){return function(){m(t),v.complete.call(t[0])}}(t)),i.WEBKIT&&i.TOUCH&&(l={},h=[0,0,0],e.each(["left","top"],function(e,i){i in a&&(h[e]=et.parseValue(a[i])-et.parseValue(t.css(i))+"px",l[i]=a[i],delete a[i])}),(h[0]||h[1])&&(t.data("revert",l),s.push("-webkit-transform"+o),g(t,"translate3d("+h.join(",")+")","transform"))),e.each(a,function(t,e){s.push(t+o)}),g(t,s.join(",")),t.css(a)}}(n,p,a,c),2)):t.setTimeout(function(){v.complete.call(n[0])},v.duration)):n.animate(a,v)}),removeAlpha:function(t){if(t instanceof I&&(t=t[0]),O<9&&t){var e=t.style,i=t.currentStyle,n=i&&i.filter||e.filter||"";/alpha/.test(n)&&(e.filter=n.replace(/alpha\([^)]*\)/i,""))}},forceStyles:function(t,i){(t=e(t)).attr("style")&&t.data("styles",t.attr("style")).removeAttr("style"),t.css(i)},revertStyles:function(){e.each(et.array(arguments),function(t,i){(i=e(i)).removeAttr("style"),i.attr("style",""),i.data("styles")&&i.attr("style",i.data("styles")).data("styles",null)})},moveOut:function(t){et.forceStyles(t,{position:"absolute",left:-1e4})},moveIn:function(){et.revertStyles.apply(et,et.array(arguments))},hide:function(t,i,n){n=n||P;var a=e(t);t=a[0],a.data("opacity")||a.data("opacity",a.css("opacity"));var o={opacity:0};if(i){var s=O<9&&t?function(){et.removeAlpha(t),t.style.visibility="hidden",n.call(t)}:n;et.animate(t,o,{duration:i,complete:s,stop:!0})}else O<9&&t?(et.removeAlpha(t),t.style.visibility="hidden"):a.css(o)},show:function(t,i,n){n=n||P;var a=e(t);t=a[0];var o={opacity:parseFloat(a.data("opacity"))||1};if(i){O<9&&(a.css("opacity",0),t.style.visibility="visible");var s=O<9&&t?function(){1==o.opacity&&et.removeAlpha(t),n.call(t)}:n;et.animate(t,o,{duration:i,complete:s,stop:!0})}else O<9&&1==o.opacity&&t?(et.removeAlpha(t),t.style.visibility="visible"):a.css(o)},wait:function(n){i._waiters=i._waiters||[],n=e.extend({until:F,success:P,error:function(){i.raise("Could not complete wait function.")},timeout:3e3},n);var a,o,s,r=et.timestamp(),c=function(){return o=et.timestamp(),a=o-r,et.removeFromArray(i._waiters,s),n.until(a)?(n.success(),!1):"number"==typeof n.timeout&&o>=r+n.timeout?(n.error(),!1):void i._waiters.push(s=t.setTimeout(c,10))};i._waiters.push(s=t.setTimeout(c,10))},toggleQuality:function(t,e){7!==O&&8!==O||!t||"IMG"!=t.nodeName.toUpperCase()||(void 0===e&&(e="nearest-neighbor"===t.style.msInterpolationMode),t.style.msInterpolationMode=e?"bicubic":"nearest-neighbor")},insertStyleTag:function(t,i){if(!i||!e("#"+i).length){var n=T.createElement("style");if(i&&(n.id=i),M().head.appendChild(n),n.styleSheet)n.styleSheet.cssText=t;else{var a=T.createTextNode(t);n.appendChild(a)}}},loadScript:function(t,i){var n=!1,a=e("<script>").attr({src:t,async:!0}).get(0);a.onload=a.onreadystatechange=function(){n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(n=!0,a.onload=a.onreadystatechange=null,"function"==typeof i&&i.call(this,this))},M().head.appendChild(a)},parseValue:function(t){if("number"==typeof t)return t;if("string"==typeof t){var e=t.match(/\-?\d|\./g);return e&&e.constructor===Array?1*e.join(""):0}return 0},timestamp:function(){return(new Date).getTime()},loadCSS:function(t,a,o){var s,r;if(e("link[rel=stylesheet]").each(function(){if(new RegExp(t).test(this.href))return s=this,!1}),"function"==typeof a&&(o=a,a=n),o=o||P,s)return o.call(s,s),s;if(r=T.styleSheets.length,e("#"+a).length)e("#"+a).attr("href",t),r--;else{s=e("<link>").attr({rel:"stylesheet",href:t,id:a}).get(0);var c=e('link[rel="stylesheet"], style');if(c.length?c.get(0).parentNode.insertBefore(s,c[0]):M().head.appendChild(s),O&&r>=31)return void i.raise("You have reached the browser stylesheet limit (31)",!0)}if("function"==typeof o){var l=e("<s>").attr("id","galleria-loader").hide().appendTo(M().body);et.wait({until:function(){return l.height()>0},success:function(){l.remove(),o.call(s,s)},error:function(){l.remove(),i.raise("Theme CSS could not load after 20 sec. "+(i.QUIRK?"Your browser is in Quirks Mode, please add a correct doctype.":"Please download the latest theme."),!0)},timeout:5e3})}return s}},it=function(t){return et.insertStyleTag(".galleria-videoicon{width:60px;height:60px;position:absolute;top:50%;left:50%;z-index:1;margin:-30px 0 0 -30px;cursor:pointer;background:#000;background:rgba(0,0,0,.8);border-radius:3px;-webkit-transition:all 150ms}.galleria-videoicon i{width:0px;height:0px;border-style:solid;border-width:10px 0 10px 16px;display:block;border-color:transparent transparent transparent #ffffff;margin:20px 0 0 22px}.galleria-image:hover .galleria-videoicon{background:#000}","galleria-videoicon"),e(et.create("galleria-videoicon")).html("<i></i>").appendTo(t).click(function(){e(this).siblings("img").mouseup()})},nt=(a=function(t,i,n,a){var o,s=this.getOptions("easing"),r=this.getStageWidth(),c={left:r*(t.rewind?-1:1)},l={left:0};n?(c.opacity=0,l.opacity=1):c.opacity=1,e(t.next).css(c),et.animate(t.next,l,{duration:t.speed,complete:(o=e(t.next).add(t.prev),function(){i(),o.css({left:0})}),queue:!1,easing:s}),a&&(t.rewind=!t.rewind),t.prev&&(c={left:0},l={left:r*(t.rewind?1:-1)},n&&(c.opacity=1,l.opacity=0),e(t.prev).css(c),et.animate(t.prev,l,{duration:t.speed,queue:!1,easing:s,complete:function(){e(this).css("opacity",0)}}))},{active:!1,init:function(t,e,i){nt.effects.hasOwnProperty(t)&&nt.effects[t].call(this,e,i)},effects:{fade:function(t,i){e(t.next).css({opacity:0,left:0}),et.animate(t.next,{opacity:1},{duration:t.speed,complete:i}),t.prev&&(e(t.prev).css("opacity",1).show(),et.animate(t.prev,{opacity:0},{duration:t.speed}))},flash:function(t,i){e(t.next).css({opacity:0,left:0}),t.prev?et.animate(t.prev,{opacity:0},{duration:t.speed/2,complete:function(){et.animate(t.next,{opacity:1},{duration:t.speed,complete:i})}}):et.animate(t.next,{opacity:1},{duration:t.speed,complete:i})},pulse:function(t,i){t.prev&&e(t.prev).hide(),e(t.next).css({opacity:0,left:0}).show(),et.animate(t.next,{opacity:1},{duration:t.speed,complete:i})},slide:function(t,e){a.apply(this,et.array(arguments))},fadeslide:function(t,e){a.apply(this,et.array(arguments).concat([!0]))},doorslide:function(t,e){a.apply(this,et.array(arguments).concat([!1,!0]))}}});return B.listen(),e.event.special["click:fast"]={propagate:!0,add:function(i){var n=function(t){if(t.touches&&t.touches.length){var e=t.touches[0];return{x:e.pageX,y:e.pageY}}},a={touched:!1,touchdown:!1,coords:{x:0,y:0},evObj:{}};e(this).data({clickstate:a,timer:0}).on("touchstart.fast",function(i){t.clearTimeout(e(this).data("timer")),e(this).data("clickstate",{touched:!0,touchdown:!0,coords:n(i.originalEvent),evObj:i})}).on("touchmove.fast",function(t){var i=n(t.originalEvent),a=e(this).data("clickstate");Math.max(Math.abs(a.coords.x-i.x),Math.abs(a.coords.y-i.y))>6&&e(this).data("clickstate",e.extend(a,{touchdown:!1}))}).on("touchend.fast",function(n){var o=e(this);o.data("clickstate").touchdown&&i.handler.call(this,n),o.data("timer",t.setTimeout(function(){o.data("clickstate",a)},400))}).on("click.fast",function(t){if(e(this).data("clickstate").touched)return!1;e(this).data("clickstate",a),i.handler.call(this,t)})},remove:function(){e(this).off("touchstart.fast touchmove.fast touchend.fast click.fast")}},C.on("orientationchange",function(){e(this).resize()}),i=function(){var a=this;this._options={},this._playing=!1,this._playtime=5e3,this._active=null,this._queue={length:0},this._data=[],this._dom={},this._thumbnails=[],this._layers=[],this._initialized=!1,this._firstrun=!1,this._stageWidth=0,this._stageHeight=0,this._target=n,this._binds=[],this._id=parseInt(1e4*$.random(),10);e.each("container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip".split(" "),function(t,e){a._dom[e]=et.create("galleria-"+e)}),e.each("current total".split(" "),function(t,e){a._dom[e]=et.create("galleria-"+e,"span")});var o=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(t){var e=t.keyCode||t.which;e in o.map&&"function"==typeof o.map[e]&&o.map[e].call(a,t)},attach:function(t){var e,i;for(e in t)t.hasOwnProperty(e)&&((i=e.toUpperCase())in o.keys?o.map[o.keys[i]]=t[e]:o.map[i]=t[e]);o.bound||(o.bound=!0,k.on("keydown",o.press))},detach:function(){o.bound=!1,o.map={},k.off("keydown",o.press)}},s=this._controls={0:n,1:n,active:0,swap:function(){s.active=s.active?0:1},getActive:function(){return a._options.swipe?s.slides[a._active]:s[s.active]},getNext:function(){return a._options.swipe?s.slides[a.getNext(a._active)]:s[1-s.active]},slides:[],frames:[],layers:[]},r=this._carousel={next:a.$("thumb-nav-right"),prev:a.$("thumb-nav-left"),width:0,current:0,max:0,hooks:[],update:function(){var t=0,i=0,n=[0];e.each(a._thumbnails,function(a,o){if(o.ready){t+=o.outerWidth||e(o.container).outerWidth(!0);var s=e(o.container).width();t+=s-$.floor(s),n[a+1]=t,i=$.max(i,o.outerHeight||e(o.container).outerHeight(!0))}}),a.$("thumbnails").css({width:t,height:i}),r.max=t,r.hooks=n,r.width=a.$("thumbnails-list").width(),r.setClasses(),a.$("thumbnails-container").toggleClass("galleria-carousel",t>r.width),r.width=a.$("thumbnails-list").width()},bindControls:function(){var t;r.next.on("click:fast",function(e){if(e.preventDefault(),"auto"===a._options.carouselSteps){for(t=r.current;t<r.hooks.length;t++)if(r.hooks[t]-r.hooks[r.current]>r.width){r.set(t-2);break}}else r.set(r.current+a._options.carouselSteps)}),r.prev.on("click:fast",function(e){if(e.preventDefault(),"auto"===a._options.carouselSteps)for(t=r.current;t>=0;t--){if(r.hooks[r.current]-r.hooks[t]>r.width){r.set(t+2);break}if(0===t){r.set(0);break}}else r.set(r.current-a._options.carouselSteps)})},set:function(t){for(t=$.max(t,0);r.hooks[t-1]+r.width>=r.max&&t>=0;)t--;r.current=t,r.animate()},getLast:function(t){return(t||r.current)-1},follow:function(t){if(0!==t&&t!==r.hooks.length-2){for(var e=r.current;r.hooks[e]-r.hooks[r.current]<r.width&&e<=r.hooks.length;)e++;t-1<r.current?r.set(t-1):t+2>e&&r.set(t-e+r.current+2)}else r.set(t)},setClasses:function(){r.prev.toggleClass("disabled",!r.current),r.next.toggleClass("disabled",r.hooks[r.current]+r.width>=r.max)},animate:function(t){r.setClasses();var i=-1*r.hooks[r.current];isNaN(i)||(a.$("thumbnails").css("left",function(){return e(this).css("left")}),et.animate(a.get("thumbnails"),{left:i},{duration:a._options.carouselSpeed,easing:a._options.easing,queue:!1}))}},c=this._tooltip={initialized:!1,open:!1,timer:"tooltip"+a._id,swapTimer:"swap"+a._id,init:function(){c.initialized=!0;et.insertStyleTag(".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}","galleria-tooltip"),a.$("tooltip").css({opacity:.8,visibility:"visible",display:"none"})},move:function(t){var e=a.getMousePosition(t).x,i=a.getMousePosition(t).y,n=a.$("tooltip"),o=e,s=i,r=n.outerHeight(!0)+1,c=n.outerWidth(!0),l=r+15,h=a.$("container").width()-c-2,u=a.$("container").height()-r-2;isNaN(o)||isNaN(s)||(o+=10,s-=r+8,o=$.max(0,$.min(h,o)),s=$.max(0,$.min(u,s)),i<l&&(s=l),n.css({left:o,top:s}))},bind:function(t,n){if(!i.TOUCH){c.initialized||c.init();var o=function(){a.$("container").off("mousemove",c.move),a.clearTimer(c.timer),a.$("tooltip").stop().animate({opacity:0},200,function(){a.$("tooltip").hide(),a.addTimer(c.swapTimer,function(){c.open=!1},1e3)})},s=function(t,i){c.define(t,i),e(t).hover(function(){a.clearTimer(c.swapTimer),a.$("container").off("mousemove",c.move).on("mousemove",c.move).trigger("mousemove"),c.show(t),a.addTimer(c.timer,function(){a.$("tooltip").stop().show().animate({opacity:1}),c.open=!0},c.open?0:500)},o).click(o)};"string"==typeof n?s(t in a._dom?a.get(t):t,n):e.each(t,function(t,e){s(a.get(t),e)})}},show:function(i){var n=(i=e(i in a._dom?a.get(i):i)).data("tt"),o=function(e){var n;t.setTimeout((n=e,function(){c.move(n)}),10),i.off("mouseup",o)};(n="function"==typeof n?n():n)&&(a.$("tooltip").html(n.replace(/\s/,"&#160;")),i.on("mouseup",o))},define:function(t,i){if("function"!=typeof i){var n=i;i=function(){return n}}t=e(t in a._dom?a.get(t):t).data("tt",i),c.show(t)}},l=this._fullscreen={scrolled:0,crop:n,active:!1,prev:e(),beforeEnter:function(t){t()},beforeExit:function(t){t()},keymap:a._keyboard.map,parseCallback:function(t,i){return nt.active?function(){"function"==typeof t&&t.call(a);var n=a._controls.getActive(),o=a._controls.getNext();a._scaleImage(o),a._scaleImage(n),i&&a._options.trueFullscreen&&e(n.container).add(o.container).trigger("transitionend")}:t},enter:function(e){l.beforeEnter(function(){e=l.parseCallback(e,!0),a._options.trueFullscreen&&B.support?(l.active=!0,et.forceStyles(a.get("container"),{width:"100%",height:"100%"}),a.rescale(),i.MAC?i.SAFARI&&/version\/[1-5]/.test(z)?(a.$("stage").css("opacity",0),t.setTimeout(function(){l.scale(),a.$("stage").css("opacity",1)},4)):(a.$("container").css("opacity",0).addClass("fullscreen"),t.setTimeout(function(){l.scale(),a.$("container").css("opacity",1)},50)):a.$("container").addClass("fullscreen"),C.resize(l.scale),B.enter(a,e,a.get("container"))):(l.scrolled=C.scrollTop(),i.TOUCH||t.scrollTo(0,0),l._enter(e))})},_enter:function(o){var s,r,c,h;l.active=!0,N&&(l.iframe=(r=T.referrer,c=T.createElement("a"),h=t.location,c.href=r,c.protocol!=h.protocol||c.hostname!=h.hostname||c.port!=h.port?(i.raise("Parent fullscreen not available. Iframe protocol, domains and ports must match."),!1):(l.pd=t.parent.document,e(l.pd).find("iframe").each(function(){if((this.contentDocument||this.contentWindow.document)===T)return s=this,!1}),s))),et.hide(a.getActiveImage()),N&&l.iframe&&(l.iframe.scrolled=e(t.parent).scrollTop(),t.parent.scrollTo(0,0));var u=a.getData(),d=a._options,p=!a._options.trueFullscreen||!B.support,f={height:"100%",overflow:"hidden",margin:0,padding:0};if(p&&(a.$("container").addClass("fullscreen"),l.prev=a.$("container").prev(),l.prev.length||(l.parent=a.$("container").parent()),a.$("container").appendTo("body"),et.forceStyles(a.get("container"),{position:i.TOUCH?"absolute":"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e4}),et.forceStyles(M().html,f),et.forceStyles(M().body,f)),N&&l.iframe&&(et.forceStyles(l.pd.documentElement,f),et.forceStyles(l.pd.body,f),et.forceStyles(l.iframe,e.extend(f,{width:"100%",height:"100%",top:0,left:0,position:"fixed",zIndex:1e4,border:"none"}))),l.keymap=e.extend({},a._keyboard.map),a.attachKeyboard({escape:a.exitFullscreen,right:a.next,left:a.prev}),l.crop=d.imageCrop,d.fullscreenCrop!=n&&(d.imageCrop=d.fullscreenCrop),u&&u.big&&u.image!==u.big){var g=new i.Picture,m=g.isCached(u.big),v=a.getIndex(),y=a._thumbnails[v];a.trigger({type:i.LOADSTART,cached:m,rewind:!1,index:v,imageTarget:a.getActiveImage(),thumbTarget:y,galleriaData:u}),g.load(u.big,function(t){a._scaleImage(t,{complete:function(t){a.trigger({type:i.LOADFINISH,cached:m,index:v,rewind:!1,imageTarget:t.image,thumbTarget:y});var n=a._controls.getActive().image;n&&(e(n).width(t.image.width).height(t.image.height).attr("style",e(t.image).attr("style")),t.image.src.srcset&&e(n).attr("srcset",t.image.src.srcset),t.image.src.sizes&&e(n).attr("sizes",t.image.src.sizes),e(n).attr("src",t.image.src))}})});var _=a.getNext(v),b=new i.Picture,w=a.getData(_);b.preload(a.isFullscreen()&&w.big?w.big:w.image)}a.rescale(function(){a.addTimer(!1,function(){p&&et.show(a.getActiveImage()),"function"==typeof o&&o.call(a),a.rescale()},100),a.trigger(i.FULLSCREEN_ENTER)}),p?C.resize(l.scale):et.show(a.getActiveImage())},scale:function(){a.rescale()},exit:function(t){l.beforeExit(function(){t=l.parseCallback(t),a._options.trueFullscreen&&B.support?B.exit(t):l._exit(t)})},_exit:function(e){l.active=!1;var n=!a._options.trueFullscreen||!B.support,o=a.$("container").removeClass("fullscreen");if(l.parent?l.parent.prepend(o):o.insertAfter(l.prev),n){et.hide(a.getActiveImage()),et.revertStyles(a.get("container"),M().html,M().body),i.TOUCH||t.scrollTo(0,l.scrolled);var s=a._controls.frames[a._controls.active];s&&s.image&&(s.image.src=s.image.src)}N&&l.iframe&&(et.revertStyles(l.pd.documentElement,l.pd.body,l.iframe),l.iframe.scrolled&&t.parent.scrollTo(0,l.iframe.scrolled)),a.detachKeyboard(),a.attachKeyboard(l.keymap),a._options.imageCrop=l.crop;var r,c=a.getData().big,h=a._controls.getActive().image;!a.getData().iframe&&h&&c&&c==h.src&&t.setTimeout((r=a.getData().image,function(){h.src=r}),1),a.rescale(function(){a.addTimer(!1,function(){n&&et.show(a.getActiveImage()),"function"==typeof e&&e.call(a),C.trigger("resize")},50),a.trigger(i.FULLSCREEN_EXIT)}),C.off("resize",l.scale)}},h=this._idle={trunk:[],bound:!1,active:!1,add:function(t,n,a,o){if(t&&!i.TOUCH){h.bound||h.addEvent(),t=e(t),"boolean"==typeof a&&(o=a,a={}),a=a||{};var s,r={};for(s in n)n.hasOwnProperty(s)&&(r[s]=t.css(s));t.data("idle",{from:e.extend(r,a),to:n,complete:!0,busy:!1}),o?t.css(n):h.addTimer(),h.trunk.push(t)}},remove:function(t){t=e(t),e.each(h.trunk,function(e,i){i&&i.length&&!i.not(t).length&&(t.css(t.data("idle").from),h.trunk.splice(e,1))}),h.trunk.length||(h.removeEvent(),a.clearTimer(h.timer))},addEvent:function(){h.bound=!0,a.$("container").on("mousemove click",h.showAll),"hover"==a._options.idleMode&&a.$("container").on("mouseleave",h.hide)},removeEvent:function(){h.bound=!1,a.$("container").on("mousemove click",h.showAll),"hover"==a._options.idleMode&&a.$("container").off("mouseleave",h.hide)},addTimer:function(){"hover"!=a._options.idleMode&&a.addTimer("idle",function(){h.hide()},a._options.idleTime)},hide:function(){if(a._options.idleMode&&!1!==a.getIndex()){a.trigger(i.IDLE_ENTER);var t=h.trunk.length;e.each(h.trunk,function(e,i){var n=i.data("idle");n&&(i.data("idle").complete=!1,et.animate(i,n.to,{duration:a._options.idleSpeed,complete:function(){e==t-1&&(h.active=!1)}}))})}},showAll:function(){a.clearTimer("idle"),e.each(h.trunk,function(t,e){h.show(e)})},show:function(t){var n=t.data("idle");h.active&&(n.busy||n.complete)||(n.busy=!0,a.trigger(i.IDLE_EXIT),a.clearTimer("idle"),et.animate(t,n.from,{duration:a._options.idleSpeed/2,complete:function(){h.active=!0,e(t).data("idle").busy=!1,e(t).data("idle").complete=!0}})),h.addTimer()}},u=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},keymap:!1,init:function(){if(!u.initialized){u.initialized=!0;var t={},n=a._options,o="",s="position:absolute;",r="lightbox-",c={overlay:"position:fixed;display:none;opacity:"+n.overlayOpacity+";filter:alpha(opacity="+100*n.overlayOpacity+");top:0;left:0;width:100%;height:100%;background:"+n.overlayBackground+";z-index:99990",box:"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991",shadow:s+"background:#000;width:100%;height:100%;",content:s+"background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden",info:s+"bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px",close:s+"top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999",image:s+"top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;",prevholder:s+"width:50%;top:0;bottom:40px;cursor:pointer;",nextholder:s+"width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;",prev:s+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif",next:s+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000",title:"float:left",counter:"float:right;margin-left:8px;"},l={},h="";h=O>7?O<9?"background:#000;filter:alpha(opacity=0);":"background:rgba(0,0,0,0);":"z-index:99999",c.nextholder+=h,c.prevholder+=h,e.each(c,function(t,e){o+=".galleria-"+r+t+"{"+e+"}"}),o+=".galleria-"+r+"box.iframe .galleria-"+r+"prevholder,.galleria-"+r+"box.iframe .galleria-"+r+"nextholder{width:100px;height:100px;top:50%;margin-top:-70px}",et.insertStyleTag(o,"galleria-lightbox"),e.each("overlay box content shadow title info close prevholder prev nextholder next counter image".split(" "),function(e,i){a.addElement("lightbox-"+i),t[i]=u.elems[i]=a.get("lightbox-"+i)}),u.image=new i.Picture,e.each({box:"shadow content close prevholder nextholder",info:"title counter",content:"info image",prevholder:"prev",nextholder:"next"},function(t,i){var n=[];e.each(i.split(" "),function(t,e){n.push(r+e)}),l[r+t]=n}),a.append(l),e(t.image).append(u.image.container),e(M().body).append(t.overlay,t.box),e(t.close).on("click:fast",u.hide).html("&#215;").hover(function(){e(this).css("color","#bbb")},function(){e(this).css("color","#444")}),e.each(["Prev","Next"],function(n,a){var o=e(t[a.toLowerCase()]).html(/v/.test(a)?"&#8249;&#160;":"&#160;&#8250;"),s=e(t[a.toLowerCase()+"holder"]);s.on("click:fast",function(){u["show"+a]()}),O<8||i.TOUCH?o.show():s.hover(function(){o.show()},function(t){o.stop().fadeOut(200)})}),e(t.overlay).on("click:fast",u.hide),i.IPAD&&(a._options.lightboxTransitionSpeed=0)}},rescale:function(t){var n=$.min(C.width()-40,u.width),o=$.min(C.height()-60,u.height),s=$.min(n/u.width,o/u.height),r=$.round(u.width*s)+40,c=$.round(u.height*s)+60,l={width:r,height:c,"margin-top":-1*$.ceil(c/2),"margin-left":-1*$.ceil(r/2)};t?e(u.elems.box).css(l):e(u.elems.box).animate(l,{duration:a._options.lightboxTransitionSpeed,easing:a._options.easing,complete:function(){var t=u.image,n=a._options.lightboxFadeSpeed;a.trigger({type:i.LIGHTBOX_IMAGE,imageTarget:t.image}),e(t.container).show(),e(t.image).animate({opacity:1},n),et.show(u.elems.info,n)}})},hide:function(){u.image.image=null,C.off("resize",u.rescale),e(u.elems.box).hide().find("iframe").remove(),et.hide(u.elems.info),a.detachKeyboard(),a.attachKeyboard(u.keymap),u.keymap=!1,et.hide(u.elems.overlay,200,function(){e(this).hide().css("opacity",a._options.overlayOpacity),a.trigger(i.LIGHTBOX_CLOSE)})},showNext:function(){u.show(a.getNext(u.active))},showPrev:function(){u.show(a.getPrev(u.active))},show:function(n){u.active=n="number"==typeof n?n:a.getIndex()||0,u.initialized||u.init(),a.trigger(i.LIGHTBOX_OPEN),u.keymap||(u.keymap=e.extend({},a._keyboard.map),a.attachKeyboard({escape:u.hide,right:u.showNext,left:u.showPrev})),C.off("resize",u.rescale);var o,s,r,c=a.getData(n),l=a.getDataLength(),h=a.getNext(n);et.hide(u.elems.info);try{for(r=a._options.preload;r>0;r--)s=new i.Picture,o=a.getData(h),s.preload(o.big?o.big:o.image),h=a.getNext(h)}catch(t){}u.image.isIframe=c.iframe&&!c.image,e(u.elems.box).toggleClass("iframe",u.image.isIframe),e(u.image.container).find(".galleria-videoicon").remove(),u.image.load(c.big||c.image||c.iframe,function(i){if(i.isIframe){var o=e(t).width(),s=e(t).height();if(i.video&&a._options.maxVideoSize){var r=$.min(a._options.maxVideoSize/o,a._options.maxVideoSize/s);r<1&&(o*=r,s*=r)}u.width=o,u.height=s}else u.width=i.original.width,u.height=i.original.height;if(e(i.image).css({width:i.isIframe?"100%":"100.1%",height:i.isIframe?"100%":"100.1%",top:0,bottom:0,zIndex:99998,opacity:0,visibility:"visible"}).parent().height("100%"),u.elems.title.innerHTML=c.title||"",u.elems.counter.innerHTML=n+1+" / "+l,C.resize(u.rescale),u.rescale(),c.image&&c.iframe){if(e(u.elems.box).addClass("iframe"),c.video){var h=it(i.container).hide();t.setTimeout(function(){h.fadeIn(200)},200)}e(i.image).css("cursor","pointer").mouseup(function(t,i){return function(n){e(u.image.container).find(".galleria-videoicon").remove(),n.preventDefault(),i.isIframe=!0,i.load(t.iframe+(t.video?"&autoplay=1":""),{width:"100%",height:O<8?e(u.image.container).height():"100%"})}}(c,i))}}),e(u.elems.overlay).show().css("visibility","visible"),e(u.elems.box).show()}},d=this._timer={trunk:{},add:function(e,i,n,a){if(e=e||(new Date).getTime(),a=a||!1,this.clear(e),a){var o=i;i=function(){o(),d.add(e,i,n)}}this.trunk[e]=t.setTimeout(i,n)},clear:function(e){var i,n=function(e){t.clearTimeout(this.trunk[e]),delete this.trunk[e]};if(e&&e in this.trunk)n.call(this,e);else if(void 0===e)for(i in this.trunk)this.trunk.hasOwnProperty(i)&&n.call(this,i)}};return this},i.prototype={constructor:i,init:function(t,a){if(a=q(a),this._original={target:t,options:a,data:null},this._target=this._dom.target=t.nodeName?t:e(t).get(0),this._original.html=this._target.innerHTML,Q.push(this),this._target){if(this._options={autoplay:!1,carousel:!0,carouselFollow:!0,carouselSpeed:400,carouselSteps:"auto",clicknext:!1,dailymotion:{foreground:"%23EEEEEE",highlight:"%235BCEC5",background:"%23222222",logo:0,hideInfos:1},dataConfig:function(t){return{}},dataSelector:"img",dataSort:!1,dataSource:this._target,debug:n,dummy:n,easing:"galleria",extend:function(t){},fullscreenCrop:n,fullscreenDoubleTap:!0,fullscreenTransition:n,height:0,idleMode:!0,idleTime:3e3,idleSpeed:200,imageCrop:!1,imageMargin:0,imagePan:!1,imagePanSmoothness:12,imagePosition:"50%",imageTimeout:n,initialTransition:n,keepSource:!1,layerFollow:!0,lightbox:!1,lightboxFadeSpeed:200,lightboxTransitionSpeed:200,linkSourceImages:!0,maxScaleRatio:n,maxVideoSize:n,minScaleRatio:n,overlayOpacity:.85,overlayBackground:"#0b0b0b",pauseOnInteraction:!0,popupLinks:!1,preload:2,queue:!0,responsive:!0,show:0,showInfo:!0,showCounter:!0,showImagenav:!0,swipe:"auto",theme:null,thumbCrop:!0,thumbEventType:"click:fast",thumbMargin:0,thumbQuality:"auto",thumbDisplayOrder:!0,thumbPosition:"50%",thumbnails:!0,touchTransition:n,transition:"fade",transitionInitial:n,transitionSpeed:400,trueFullscreen:!0,useCanvas:!1,variation:"",videoPoster:!0,vimeo:{title:0,byline:0,portrait:0,color:"aaaaaa"},wait:5e3,width:"auto",youtube:{modestbranding:1,autohide:1,color:"white",hd:1,rel:0,showinfo:0}},this._options.initialTransition=this._options.initialTransition||this._options.transitionInitial,a&&(!1===a.debug&&(A=!1),"number"==typeof a.imageTimeout&&a.imageTimeout,"string"==typeof a.dummy&&(E=a.dummy),"string"==typeof a.theme&&(this._options.theme=a.theme)),e(this._target).children().hide(),i.QUIRK&&i.raise("Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype."),J.length)if(this._options.theme){for(var o=0;o<J.length;o++)if(this._options.theme===J[o].name){this.theme=J[o];break}}else this.theme=J[0];return"object"==typeof this.theme?this._init():Z.push(this),this}i.raise("Target not found",!0)},_init:function(){var a,o,s,r,c,l,h,u,d,p=this,f=this._options;if(this._initialized)return i.raise("Init failed: Gallery instance already initialized."),this;if(this._initialized=!0,!this.theme)return i.raise("Init failed: No theme found.",!0),this;if(e.extend(!0,f,this.theme.defaults,this._original.options,i.configure.options),f.swipe="enforced"==(a=f.swipe)||!1!==a&&"disabled"!=a&&!!i.TOUCH,f.swipe&&(f.clicknext=!1,f.imagePan=!1),"getContext"in(o=T.createElement("canvas"))?Y=Y||{elem:o,context:o.getContext("2d"),cache:{},length:0}:o=null,this.bind(i.DATA,function(){t.screen&&t.screen.width&&Array.prototype.forEach&&this._data.forEach(function(e){var i="devicePixelRatio"in t?t.devicePixelRatio:1;$.max(t.screen.width,t.screen.height)*i<1024&&(e.big=e.image)}),this._original.data=this._data,this.get("total").innerHTML=this.getDataLength();var e=this.$("container");p._options.height<2&&(p._userRatio=p._ratio=p._options.height);var n={width:0,height:0},a=function(){return p.$("stage").height()};et.wait({until:function(){return n=p._getWH(),e.width(n.width).height(n.height),a()&&n.width&&n.height>50},success:function(){p._width=n.width,p._height=n.height,p._ratio=p._ratio||n.height/n.width,i.WEBKIT?t.setTimeout(function(){p._run()},1):p._run()},error:function(){a()?i.raise("Could not extract sufficient width/height of the gallery container. Traced measures: width:"+n.width+"px, height: "+n.height+"px.",!0):i.raise("Could not extract a stage height from the CSS. Traced height: "+a()+"px.",!0)},timeout:"number"==typeof this._options.wait&&this._options.wait})}),this.append({"info-text":["info-title","info-description"],info:["info-text"],"image-nav":["image-nav-right","image-nav-left"],stage:["images","loader","counter","image-nav"],"thumbnails-list":["thumbnails"],"thumbnails-container":["thumb-nav-left","thumbnails-list","thumb-nav-right"],container:["stage","thumbnails-container","info","tooltip"]}),et.hide(this.$("counter").append(this.get("current"),T.createTextNode(" / "),this.get("total"))),this.setCounter("&#8211;"),et.hide(p.get("tooltip")),this.$("container").addClass([i.TOUCH?"touch":"notouch",this._options.variation,"galleria-theme-"+this.theme.name].join(" ")),this._options.swipe||e.each(new Array(2),function(t){var n=new i.Picture;e(n.container).css({position:"absolute",top:0,left:0}).prepend(p._layers[t]=e(et.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]),p.$("images").append(n.container),p._controls[t]=n;var a=new i.Picture;a.isIframe=!0,e(a.container).attr("class","galleria-frame").css({position:"absolute",top:0,left:0,zIndex:4,background:"#000",display:"none"}).appendTo(n.container),p._controls.frames[t]=a}),this.$("images").css({position:"relative",top:0,left:0,width:"100%",height:"100%"}),f.swipe&&(this.$("images").css({position:"absolute",top:0,left:0,width:0,height:"100%"}),this.finger=new i.Finger(this.get("stage"),{onchange:function(t){p.pause().show(t)},oncomplete:function(t){var i=$.max(0,$.min(parseInt(t,10),p.getDataLength()-1)),n=p.getData(i);e(p._thumbnails[i].container).addClass("active").siblings(".active").removeClass("active"),n&&(p.$("images").find(".galleria-frame").css("opacity",0).hide().find("iframe").remove(),p._options.carousel&&p._options.carouselFollow&&p._carousel.follow(i))}}),this.bind(i.RESCALE,function(){this.finger.setup()}),this.$("stage").on("click",function(i){var a=p.getData();if(a){if(a.iframe){p.isPlaying()&&p.pause();var o=p._controls.frames[p._active],s=p._stageWidth,r=p._stageHeight;if(e(o.container).find("iframe").length)return;return e(o.container).css({width:s,height:r,opacity:0}).show().animate({opacity:1},200),void t.setTimeout(function(){o.load(a.iframe+(a.video?"&autoplay=1":""),{width:s,height:r},function(t){p.$("container").addClass("videoplay"),t.scale({width:p._stageWidth,height:p._stageHeight,iframelimit:a.video?p._options.maxVideoSize:n})})},100)}a.link&&(p._options.popupLinks?t.open(a.link,"_blank"):t.location.href=a.link)}}),this.bind(i.IMAGE,function(t){p.setCounter(t.index),p.setInfo(t.index);var i=this.getNext(),n=this.getPrev(),a=[n,i];a.push(this.getNext(i),this.getPrev(n),p._controls.slides.length-1);var o=[];e.each(a,function(t,i){-1==e.inArray(i,o)&&o.push(i)}),e.each(o,function(t,i){var n=p.getData(i),a=p._controls.slides[i],o=p.isFullscreen()&&n.big?n.big:n.image||n.iframe;n.iframe&&!n.image&&(a.isIframe=!0),a.ready||p._controls.slides[i].load(o,function(t){t.isIframe||e(t.image).css("visibility","hidden"),p._scaleImage(t,{complete:function(t){t.isIframe||e(t.image).css({opacity:0,visibility:"visible"}).animate({opacity:1},200)}})})})})),this.$("thumbnails, thumbnails-list").css({overflow:"hidden",position:"relative"}),this.$("image-nav-right, image-nav-left").on("click:fast",function(t){f.pauseOnInteraction&&p.pause();var e=/right/.test(this.className)?"next":"prev";p[e]()}).on("click",function(t){t.preventDefault(),(f.clicknext||f.swipe)&&t.stopPropagation()}),e.each(["info","counter","image-nav"],function(t,e){!1===f["show"+e.substr(0,1).toUpperCase()+e.substr(1).replace(/-/,"")]&&et.moveOut(p.get(e.toLowerCase()))}),this.load(),f.keepSource||O||(this._target.innerHTML=""),this.get("errors")&&this.appendChild("target","errors"),this.appendChild("target","container"),f.carousel){var g=0,m=f.show;this.bind(i.THUMBNAIL,function(){this.updateCarousel(),++g==this.getDataLength()&&"number"==typeof m&&m>0&&this._carousel.follow(m)})}return f.responsive&&C.on("resize",function(){p.isFullscreen()||p.resize()}),f.fullscreenDoubleTap&&this.$("stage").on("touchstart",(d=function(t){return t.originalEvent.touches?t.originalEvent.touches[0]:t},p.$("stage").on("touchmove",function(){s=0}),function(t){if(!/(-left|-right)/.test(t.target.className)){if(u=et.timestamp(),r=d(t).pageX,c=d(t).pageY,t.originalEvent.touches.length<2&&u-s<300&&r-l<20&&c-h<20)return p.toggleFullscreen(),void t.preventDefault();s=u,l=r,h=c}})),e.each(i.on.binds,function(t,i){-1==e.inArray(i.hash,p._binds)&&p.bind(i.type,i.callback)}),this},addTimer:function(){return this._timer.add.apply(this._timer,et.array(arguments)),this},clearTimer:function(){return this._timer.clear.apply(this._timer,et.array(arguments)),this},_getWH:function(){var t,i=this.$("container"),n=this.$("target"),a=this,o={};return e.each(["width","height"],function(e,s){a._options[s]&&"number"==typeof a._options[s]?o[s]=a._options[s]:(t=[et.parseValue(i.css(s)),et.parseValue(n.css(s)),i[s](),n[s]()],a["_"+s]||t.splice(t.length,et.parseValue(i.css("min-"+s)),et.parseValue(n.css("min-"+s))),o[s]=$.max.apply($,t))}),a._userRatio&&(o.height=o.width*a._userRatio),o},_createThumbnails:function(n){this.get("total").innerHTML=this.getDataLength();var a,o,s,r,c,l=this,h=this._options,u=n?this._data.length-n.length:0,d=u,p=[],f=0,g=O<8?"http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif":"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D",m=!!(c=l.$("thumbnails").find(".active")).length&&c.find("img").attr("src"),v="string"==typeof h.thumbnails?h.thumbnails.toLowerCase():null,y=function(t){return T.defaultView&&T.defaultView.getComputedStyle?T.defaultView.getComputedStyle(o.container,null)[t]:r.css(t)},_=function(t,n,a){return function(){e(a).append(t),l.trigger({type:i.THUMBNAIL,thumbTarget:t,index:n,galleriaData:l.getData(n)})}},b=function(t){h.pauseOnInteraction&&l.pause();var i=e(t.currentTarget).data("index");l.getIndex()!==i&&l.show(i),t.preventDefault()},w=function(t,n){e(t.container).css("visibility","visible"),l.trigger({type:i.THUMBNAIL,thumbTarget:t.image,index:t.data.order,galleriaData:l.getData(t.data.order)}),"function"==typeof n&&n.call(l,t)},x=function(t,i){t.scale({width:t.data.width,height:t.data.height,crop:h.thumbCrop,margin:h.thumbMargin,canvas:h.useCanvas,position:h.thumbPosition,complete:function(t){var n,a,o=["left","top"];l.getData(t.index),e.each(["Width","Height"],function(i,s){n=s.toLowerCase(),!0===h.thumbCrop&&h.thumbCrop!==n||((a={})[n]=t[n],e(t.container).css(a),(a={})[o[i]]=0,e(t.image).css(a)),t["outer"+s]=e(t.container)["outer"+s](!0)}),et.toggleQuality(t.image,!0===h.thumbQuality||"auto"===h.thumbQuality&&t.original.width<3*t.width),h.thumbDisplayOrder&&!t.lazy?e.each(p,function(t,e){if(t===f&&e.ready&&!e.displayed)return f++,e.displayed=!0,void w(e,i)}):w(t,i)}})};for(n||(this._thumbnails=[],this.$("thumbnails").empty());this._data[u];u++)a=(s=this._data[u]).thumb||s.image,!0!==h.thumbnails&&"lazy"!=v||!s.thumb&&!s.image?s.iframe&&null!==v||"empty"===v||"numbers"===v?(o={container:et.create("galleria-image"),image:et.create("img","span"),ready:!0,data:{order:u}},"numbers"===v&&e(o.image).text(u+1),s.iframe&&e(o.image).addClass("iframe"),this.$("thumbnails").append(o.container),t.setTimeout(_(o.image,u,o.container),50+20*u)):o={container:null,image:null}:((o=new i.Picture(u)).index=u,o.displayed=!1,o.lazy=!1,o.video=!1,this.$("thumbnails").append(o.container),(r=e(o.container)).css("visibility","hidden"),o.data={width:et.parseValue(y("width")),height:et.parseValue(y("height")),order:u,src:a},!0!==h.thumbCrop?r.css({width:"auto",height:"auto"}):r.css({width:o.data.width,height:o.data.height}),"lazy"==v?(r.addClass("lazy"),o.lazy=!0,o.load(g,{height:o.data.height,width:o.data.width})):o.load(a,x),"all"===h.preload&&o.preload(s.image)),e(o.container).add(h.keepSource&&h.linkSourceImages?s.original:null).data("index",u).on(h.thumbEventType,b).data("thumbload",x),m===a&&e(o.container).addClass("active"),this._thumbnails.push(o);return p=this._thumbnails.slice(d),this},lazyLoad:function(t,i){var n=t.constructor==Array?t:[t],a=this,o=0;return e.each(n,function(t,s){if(!(s>a._thumbnails.length-1)){var r=a._thumbnails[s],c=r.data,l=function(){++o==n.length&&"function"==typeof i&&i.call(a)},h=e(r.container).data("thumbload");h&&(r.video?h.call(a,r,l):r.load(c.src,function(t){h.call(a,t,l)}))}}),this},lazyLoadChunks:function(e,i){var n=this.getDataLength(),a=0,o=0,s=[],r=[],c=this;for(i=i||0;a<n;a++)r.push(a),++o!=e&&a!=n-1||(s.push(r),o=0,r=[]);var l=function(e){var n=s.shift();n&&t.setTimeout(function(){c.lazyLoad(n,function(){l(!0)})},i&&e?i:0)};return l(!1),this},_run:function(){var a=this;a._createThumbnails(),et.wait({timeout:1e4,until:function(){return i.OPERA&&a.$("stage").css("display","inline-block"),a._stageWidth=a.$("stage").width(),a._stageHeight=a.$("stage").height(),a._stageWidth&&a._stageHeight>50},success:function(){if(G.push(a),a._options.swipe){var o=a.$("images").width(a.getDataLength()*a._stageWidth);e.each(new Array(a.getDataLength()),function(t){var n=new i.Picture,s=a.getData(t);e(n.container).css({position:"absolute",top:0,left:a._stageWidth*t}).prepend(a._layers[t]=e(et.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]).appendTo(o),s.video&&it(n.container),a._controls.slides.push(n);var r=new i.Picture;r.isIframe=!0,e(r.container).attr("class","galleria-frame").css({position:"absolute",top:0,left:0,zIndex:4,background:"#000",display:"none"}).appendTo(n.container),a._controls.frames.push(r)}),a.finger.setup()}if(et.show(a.get("counter")),a._options.carousel&&a._carousel.bindControls(),a._options.autoplay&&(a.pause(),"number"==typeof a._options.autoplay&&(a._playtime=a._options.autoplay),a._playing=!0),a._firstrun)return a._options.autoplay&&a.trigger(i.PLAY),void("number"==typeof a._options.show&&a.show(a._options.show));a._firstrun=!0,i.History&&i.History.change(function(e){isNaN(e)?t.history.go(-1):a.show(e,n,!0)}),a.trigger(i.READY),a.theme.init.call(a,a._options),e.each(i.ready.callbacks,function(t,e){"function"==typeof e&&e.call(a,a._options)}),a._options.extend.call(a,a._options),/^[0-9]{1,4}$/.test(D)&&i.History?a.show(D,n,!0):a._data[a._options.show]&&a.show(a._options.show),a._options.autoplay&&a.trigger(i.PLAY)},error:function(){i.raise("Stage width or height is too small to show the gallery. Traced measures: width:"+a._stageWidth+"px, height: "+a._stageHeight+"px.",!0)}})},load:function(t,n,a){var o=this,s=this._options;return this._data=[],this._thumbnails=[],this.$("thumbnails").empty(),"function"==typeof n&&(a=n,n=null),t=t||s.dataSource,n=n||s.dataSelector,a=a||s.dataConfig,e.isPlainObject(t)&&(t=[t]),e.isArray(t)?this.validate(t)?this._data=t:i.raise("Load failed: JSON Array not valid."):(n+=",.video,.iframe",e(t).find(n).each(function(t,i){i=e(i);var n={},s=i.parent(),r=s.attr("href"),c=s.attr("rel");r&&("IMG"==i[0].nodeName||i.hasClass("video"))&&X(r)?n.video=r:r&&i.hasClass("iframe")?n.iframe=r:n.image=r,c&&(n.big=c),n.imagesrcset=s.data("srcset"),n.imagesizes=s.data("sizes"),n.thumbsizes=i.attr("sizes"),n.thumbsrcset=i.attr("srcset"),e.each("big bigsrcset bigsizes title description link layer image imagesrcset imagesizes".split(" "),function(t,e){i.data(e)&&(n[e]=i.data(e).toString())}),i.data("srcset")&&(n.imagesrcset=i.data("srcset")),i.data("sizes")&&(n.imagesizes=i.data("sizes")),n.big||(n.big=n.image,n.bigsrcset=n.imagesrcset,n.bigsizes=n.imagesizes),o._data.push(e.extend({title:i.attr("title")||"",thumb:i.attr("src"),image:i.attr("src"),big:i.attr("src"),description:i.attr("alt")||"",link:i.attr("longdesc"),original:i.get(0)},n,a(i)))})),"function"==typeof s.dataSort?S.sort.call(this._data,s.dataSort):"random"==s.dataSort&&this._data.sort(function(){return $.round($.random())-.5}),this.getDataLength()&&this._parseData(function(){this.trigger(i.DATA)}),this},_parseData:function(t){var i,a=this,o=!1,s=function(){var i=!0;e.each(a._data,function(t,e){if(e.loading)return i=!1,!1}),i&&!o&&(o=!0,t.call(a))};return e.each(this._data,function(t,o){if(i=a._data[t],e.each("big image thumb".split(" "),function(t,e){o[e]&&(o[e]=new String(o[e]),o[e].srcset=o[e+"srcset"],o[e].sizes=o[e+"sizes"])}),"thumb"in o==!1&&(i.thumb=o.image),o.big||(i.big=o.image),"video"in o){var r=X(o.video);r&&(i.iframe=new j(r.provider,r.id).embed()+function(){if("object"==typeof a._options[r.provider]){var t=[];return e.each(a._options[r.provider],function(e,i){t.push(e+"="+i)}),"youtube"==r.provider&&(t=["wmode=opaque"].concat(t)),"?"+t.join("&")}return""}(),i.thumb&&i.image||e.each(["thumb","image"],function(t,e){if("image"!=e||a._options.videoPoster){var o=new j(r.provider,r.id);i[e]||(i.loading=!0,o.getMedia(e,function(t,e){return function(i){t[e]=i,"image"!=e||t.big||(t.big=t.image),delete t.loading,s()}}(i,e)))}else i.image=n}))}}),s(),this},destroy:function(){return this.$("target").data("galleria",null),this.$("container").off("galleria"),this.get("target").innerHTML=this._original.html,this.clearTimer(),et.removeFromArray(Q,this),et.removeFromArray(G,this),V._inst=[],void 0!==i._waiters&&i._waiters.length&&e.each(i._waiters,function(e,i){i&&t.clearTimeout(i)}),this},splice:function(){var e=this,i=et.array(arguments);return t.setTimeout(function(){S.splice.apply(e._data,i),e._parseData(function(){e._createThumbnails()})},2),e},push:function(){var e=this,i=et.array(arguments);return 1==i.length&&i[0].constructor==Array&&(i=i[0]),t.setTimeout(function(){S.push.apply(e._data,i),e._parseData(function(){e._createThumbnails(i)})},2),e},_getActive:function(){return this._controls.getActive()},validate:function(t){return!0},bind:function(t,e){return t=U(t),this.$("container").on(t,this.proxy(e)),this},unbind:function(t){return t=U(t),this.$("container").off(t),this},trigger:function(t){return t="object"==typeof t?e.extend(t,{scope:this}):{type:U(t),scope:this},this.$("container").trigger(t),this},addIdleState:function(t,e,i,n){return this._idle.add.apply(this._idle,et.array(arguments)),this},removeIdleState:function(t){return this._idle.remove.apply(this._idle,et.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(t){return this._fullscreen.enter.apply(this,et.array(arguments)),this},exitFullscreen:function(t){return this._fullscreen.exit.apply(this,et.array(arguments)),this},toggleFullscreen:function(t){return this._fullscreen[this.isFullscreen()?"exit":"enter"].apply(this,et.array(arguments)),this},bindTooltip:function(t,e){return this._tooltip.bind.apply(this._tooltip,et.array(arguments)),this},defineTooltip:function(t,e){return this._tooltip.define.apply(this._tooltip,et.array(arguments)),this},refreshTooltip:function(t){return this._tooltip.show.apply(this._tooltip,et.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,et.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,et.array(arguments)),this},hasVariation:function(t){return e.inArray(t,this._options.variation.split(/\s+/))>-1},getActiveImage:function(){var t=this._getActive();return t?t.image:n},getActiveThumb:function(){return this._thumbnails[this._active].image||n},getMousePosition:function(t){return{x:t.pageX-this.$("container").offset().left,y:t.pageY-this.$("container").offset().top}},addPan:function(t){if(!1!==this._options.imageCrop){t=e(t||this.getActiveImage());var i=this,n=t.width()/2,a=t.height()/2,o=parseInt(t.css("left"),10),s=parseInt(t.css("top"),10),r=o||0,c=s||0,l=0,h=0,u=!1,d=et.timestamp(),p=0,f=0,g=function(e,i,n){if(e>0&&(f=$.round($.max(-1*e,$.min(0,i))),p!==f))if(p=f,8===O)t.parent()["scroll"+n](-1*f);else{var a={};a[n.toLowerCase()]=f,t.css(a)}},m=function(t){et.timestamp()-d<50||(u=!0,n=i.getMousePosition(t).x,a=i.getMousePosition(t).y)};return 8===O&&(t.parent().scrollTop(-1*c).scrollLeft(-1*r),t.css({top:0,left:0})),this.$("stage").off("mousemove",m).on("mousemove",m),this.addTimer("pan"+i._id,function(e){u&&(l=t.width()-i._stageWidth,h=t.height()-i._stageHeight,o=n/i._stageWidth*l*-1,s=a/i._stageHeight*h*-1,r+=(o-r)/i._options.imagePanSmoothness,c+=(s-c)/i._options.imagePanSmoothness,g(h,c,"Top"),g(l,r,"Left"))},50,!0),this}},proxy:function(t,e){return"function"!=typeof t?P:(e=e||this,function(){return t.apply(e,et.array(arguments))})},getThemeName:function(){return this.theme.name},removePan:function(){return this.$("stage").off("mousemove"),this.clearTimer("pan"+this._id),this},addElement:function(t){var i=this._dom;return e.each(et.array(arguments),function(t,e){i[e]=et.create("galleria-"+e)}),this},attachKeyboard:function(t){return this._keyboard.attach.apply(this._keyboard,et.array(arguments)),this},detachKeyboard:function(){return this._keyboard.detach.apply(this._keyboard,et.array(arguments)),this},appendChild:function(t,e){return this.$(t).append(this.get(e)||e),this},prependChild:function(t,e){return this.$(t).prepend(this.get(e)||e),this},remove:function(t){return this.$(et.array(arguments).join(",")).remove(),this},append:function(t){var e,i;for(e in t)if(t.hasOwnProperty(e))if(t[e].constructor===Array)for(i=0;t[e][i];i++)this.appendChild(e,t[e][i]);else this.appendChild(e,t[e]);return this},_scaleImage:function(t,i){if(t=t||this._controls.getActive()){var n,a=function(t){e(t.container).children(":first").css({top:$.max(0,et.parseValue(t.image.style.top)),left:$.max(0,et.parseValue(t.image.style.left)),width:et.parseValue(t.image.width),height:et.parseValue(t.image.height)})};return i=e.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition,iframelimit:this._options.maxVideoSize},i),this._options.layerFollow&&!0!==this._options.imageCrop?"function"==typeof i.complete?(n=i.complete,i.complete=function(){n.call(t,t),a(t)}):i.complete=a:e(t.container).children(":first").css({top:0,left:0}),t.scale(i),this}},updateCarousel:function(){return this._carousel.update(),this},resize:function(t,i){"function"==typeof t&&(i=t,t=n),t=e.extend({width:0,height:0},t);var a=this,o=this.$("container");return e.each(t,function(e,i){i||(o[e]("auto"),t[e]=a._getWH()[e])}),e.each(t,function(t,e){o[t](e)}),this.rescale(i)},rescale:function(t,a,o){var s=this;"function"==typeof t&&(o=t,t=n);return function(){s._stageWidth=t||s.$("stage").width(),s._stageHeight=a||s.$("stage").height(),s._options.swipe?(e.each(s._controls.slides,function(t,i){s._scaleImage(i),e(i.container).css("left",s._stageWidth*t)}),s.$("images").css("width",s._stageWidth*s.getDataLength())):s._scaleImage(),s._options.carousel&&s.updateCarousel(),s._controls.frames[s._controls.active]&&s._controls.frames[s._controls.active].scale({width:s._stageWidth,height:s._stageHeight,iframelimit:s._options.maxVideoSize}),s.trigger(i.RESCALE),"function"==typeof o&&o.call(s)}.call(s),this},refreshImage:function(){return this._scaleImage(),this._options.imagePan&&this.addPan(),this},_preload:function(){if(this._options.preload){var t,e,n,a=this.getNext();try{for(e=this._options.preload;e>0;e--)t=new i.Picture,n=this.getData(a),t.preload(this.isFullscreen()&&n.big?n.big:n.image),a=this.getNext(a)}catch(t){}}},show:function(n,a,o){var s=this._options.swipe;if(s||!(this._queue.length>3||!1===n||!this._options.queue&&this._queue.stalled)){if(n=$.max(0,$.min(parseInt(n,10),this.getDataLength()-1)),a=void 0!==a?!!a:n<this.getIndex(),(o=o||!1)||!i.History){if(this.finger&&n!==this._active&&(this.finger.to=-n*this.finger.width,this.finger.index=n),this._active=n,s){var r=this.getData(n),c=this;if(!r)return;var l=this.isFullscreen()&&r.big?r.big:r.image||r.iframe,h=this._controls.slides[n],u=h.isCached(l),d=this._thumbnails[n],p={cached:u,index:n,rewind:a,imageTarget:h.image,thumbTarget:d.image,galleriaData:r};this.trigger(e.extend(p,{type:i.LOADSTART})),c.$("container").removeClass("videoplay");var f=function(){c._layers[n].innerHTML=c.getData().layer||"",c.trigger(e.extend(p,{type:i.LOADFINISH})),c._playCheck()};c._preload(),t.setTimeout(function(){h.ready&&e(h.image).attr("src")==l?(c.trigger(e.extend(p,{type:i.IMAGE})),f()):(r.iframe&&!r.image&&(h.isIframe=!0),h.load(l,function(t){p.imageTarget=t.image,c._scaleImage(t,f).trigger(e.extend(p,{type:i.IMAGE})),f()}))},100)}else S.push.call(this._queue,{index:n,rewind:a}),this._queue.stalled||this._show();return this}i.History.set(n.toString())}},_show:function(){var a=this,o=this._queue[0],s=this.getData(o.index);if(s){var r=this.isFullscreen()&&s.big?s.big:s.image||s.iframe,c=this._controls.getActive(),l=this._controls.getNext(),h=l.isCached(r),u=this._thumbnails[o.index],d=function(){e(l.image).trigger("mouseup")};a.$("container").toggleClass("iframe",!!s.isIframe).removeClass("videoplay");var p=function(o,s,r,c,l){return function(){nt.active=!1,et.toggleQuality(s.image,a._options.imageQuality),a._layers[a._controls.active].innerHTML="",e(r.container).css({zIndex:0,opacity:0}).show(),e(r.container).find("iframe, .galleria-videoicon").remove(),e(a._controls.frames[a._controls.active].container).hide(),e(s.container).css({zIndex:1,left:0,top:0}).show(),a._controls.swap(),a._options.imagePan&&a.addPan(s.image),(o.iframe&&o.image||o.link||a._options.lightbox||a._options.clicknext)&&e(s.image).css({cursor:"pointer"}).on("mouseup",function(s){if(!("number"==typeof s.which&&s.which>1)){if(o.iframe){a.isPlaying()&&a.pause();var r=a._controls.frames[a._controls.active],c=a._stageWidth,l=a._stageHeight;return e(r.container).css({width:c,height:l,opacity:0}).show().animate({opacity:1},200),void t.setTimeout(function(){r.load(o.iframe+(o.video?"&autoplay=1":""),{width:c,height:l},function(t){a.$("container").addClass("videoplay"),t.scale({width:a._stageWidth,height:a._stageHeight,iframelimit:o.video?a._options.maxVideoSize:n})})},100)}if(a._options.clicknext&&!i.TOUCH)return a._options.pauseOnInteraction&&a.pause(),void a.next();o.link?a._options.popupLinks?t.open(o.link,"_blank"):t.location.href=o.link:a._options.lightbox&&a.openLightbox()}}),a._playCheck(),a.trigger({type:i.IMAGE,index:c.index,imageTarget:s.image,thumbTarget:l.image,galleriaData:o}),S.shift.call(a._queue),a._queue.stalled=!1,a._queue.length&&a._show()}}(s,l,c,o,u);this._options.carousel&&this._options.carouselFollow&&this._carousel.follow(o.index),a._preload(),et.show(l.container),l.isIframe=s.iframe&&!s.image,e(a._thumbnails[o.index].container).addClass("active").siblings(".active").removeClass("active"),a.trigger({type:i.LOADSTART,cached:h,index:o.index,rewind:o.rewind,imageTarget:l.image,thumbTarget:u.image,galleriaData:s}),a._queue.stalled=!0,l.load(r,function(t){var r=e(a._layers[1-a._controls.active]).html(s.layer||"").hide();a._scaleImage(t,{complete:function(t){"image"in c&&et.toggleQuality(c.image,!1),et.toggleQuality(t.image,!1),a.removePan(),a.setInfo(o.index),a.setCounter(o.index),s.layer&&(r.show(),(s.iframe&&s.image||s.link||a._options.lightbox||a._options.clicknext)&&r.css("cursor","pointer").off("mouseup").mouseup(d)),s.video&&s.image&&it(t.container);var l=a._options.transition;if(e.each({initial:null===c.image,touch:i.TOUCH,fullscreen:a.isFullscreen()},function(t,e){if(e&&a._options[t+"Transition"]!==n)return l=a._options[t+"Transition"],!1}),l in nt.effects==!1)p();else{var u={prev:c.container,next:t.container,rewind:o.rewind,speed:a._options.transitionSpeed||400};nt.active=!0,nt.init.call(a,l,u,p)}a.trigger({type:i.LOADFINISH,cached:h,index:o.index,rewind:o.rewind,imageTarget:t.image,thumbTarget:a._thumbnails[o.index].image,galleriaData:a.getData(o.index)})}})})}},getNext:function(t){return(t="number"==typeof t?t:this.getIndex())===this.getDataLength()-1?0:t+1},getPrev:function(t){return 0===(t="number"==typeof t?t:this.getIndex())?this.getDataLength()-1:t-1},next:function(){return this.getDataLength()>1&&this.show(this.getNext(),!1),this},prev:function(){return this.getDataLength()>1&&this.show(this.getPrev(),!0),this},get:function(t){return t in this._dom?this._dom[t]:null},getData:function(t){return t in this._data?this._data[t]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return"number"==typeof this._active&&this._active},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(t){return void 0===t?this._options:this._options[t]},setOptions:function(t,i){return"object"==typeof t?e.extend(this._options,t):this._options[t]=i,this},play:function(t){return this._playing=!0,this._playtime=t||this._playtime,this._playCheck(),this.trigger(i.PLAY),this},pause:function(){return this._playing=!1,this.trigger(i.PAUSE),this},playToggle:function(t){return this._playing?this.pause():this.play(t)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var t=this,e=0,n=et.timestamp(),a="play"+this._id;if(this._playing){this.clearTimer(a);var o=function(){if((e=et.timestamp()-n)>=t._playtime&&t._playing)return t.clearTimer(a),void t.next();t._playing&&(t.trigger({type:i.PROGRESS,percent:$.ceil(e/t._playtime*100),seconds:$.floor(e/1e3),milliseconds:e}),t.addTimer(a,o,20))};t.addTimer(a,o,20)}},setPlaytime:function(t){return this._playtime=t,this},setIndex:function(t){return this._active=t,this},setCounter:function(t){if("number"==typeof t?t++:void 0===t&&(t=this.getIndex()+1),this.get("current").innerHTML=t,O){var e=this.$("counter"),i=e.css("opacity");1===parseInt(i,10)?et.removeAlpha(e[0]):this.$("counter").css("opacity",i)}return this},setInfo:function(t){var i=this,n=this.getData(t);return e.each(["title","description"],function(t,e){var a=i.$("info-"+e);n[e]?a[n[e].length?"show":"hide"]().html(n[e]):a.empty().hide()}),this},hasInfo:function(t){var e,i="title description".split(" ");for(e=0;i[e];e++)if(this.getData(t)[i[e]])return!0;return!1},jQuery:function(t){var i=this,n=[];e.each(t.split(","),function(t,a){a=e.trim(a),i.get(a)&&n.push(a)});var a=e(i.get(n.shift()));return e.each(n,function(t,e){a=a.add(i.get(e))}),a},$:function(t){return this.jQuery.apply(this,et.array(arguments))}},e.each(W,function(t,e){var n=/_/.test(e)?e.replace(/_/g,""):e;i[e.toUpperCase()]="galleria."+n}),e.extend(i,{IE9:9===O,IE8:8===O,IE7:7===O,IE6:6===O,IE:O,WEBKIT:/webkit/.test(z),CHROME:/chrome/.test(z),SAFARI:/safari/.test(z)&&!/chrome/.test(z),QUIRK:O&&T.compatMode&&"BackCompat"===T.compatMode,MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!t.opera,IPHONE:/iphone/.test(z),IPAD:/ipad/.test(z),ANDROID:/android/.test(z),TOUCH:"ontouchstart"in T&&H}),i.addTheme=function(n){n.name||i.raise("No theme name specified"),(!n.version||parseInt(10*i.version)>parseInt(10*n.version))&&i.raise("This version of Galleria requires "+n.name+" theme version "+parseInt(10*i.version)/10+" or later",!0),"object"!=typeof n.defaults?n.defaults={}:n.defaults=q(n.defaults);var a,o,s=!1;return"string"==typeof n.css?(e("link").each(function(t,e){if((a=new RegExp(n.css)).test(e.href))return s=!0,tt(n),!1}),s||e(function(){var r=0,c=function(){e("script").each(function(e,i){a=new RegExp("galleria\\."+n.name.toLowerCase()+"\\."),o=new RegExp("galleria\\.io\\/theme\\/"+n.name.toLowerCase()+"\\/(\\d*\\.*)?(\\d*\\.*)?(\\d*\\/)?js"),(a.test(i.src)||o.test(i.src))&&(s=i.src.replace(/[^\/]*$/,"")+n.css,t.setTimeout(function(){et.loadCSS(s,"galleria-theme-"+n.name,function(){tt(n)})},1))}),s||(r++>5?i.raise("No theme CSS loaded"):t.setTimeout(c,500))};c()})):tt(n),n},i.loadTheme=function(n,a){if(!e("script").filter(function(){return e(this).attr("src")==n}).length){var o,s=!1;return e(t).on("load",function(){s||(o=t.setTimeout(function(){s||i.raise("Galleria had problems loading theme at "+n+". Please check theme path or load manually.",!0)},2e4))}),et.loadScript(n,function(){s=!0,t.clearTimeout(o)}),i}},i.get=function(t){return Q[t]?Q[t]:"number"!=typeof t?Q:void i.raise("Gallery index "+t+" not found")},i.configure=function(t,n){var a={};return"string"==typeof t&&n?(a[t]=n,t=a):e.extend(a,t),i.configure.options=a,e.each(i.get(),function(t,e){e.setOptions(a)}),i},i.configure.options={},i.on=function(t,n){if(t){var a=t+(n=n||P).toString().replace(/\s/g,"")+et.timestamp();return e.each(i.get(),function(e,i){i._binds.push(a),i.bind(t,n)}),i.on.binds.push({type:t,callback:n,hash:a}),i}},i.on.binds=[],i.run=function(t,n){return e.isFunction(n)&&(n={extend:n}),e(t||"#galleria").galleria(n),i},i.addTransition=function(t,e){return nt.effects[t]=e,i},i.utils=et,i.log=function(){var i=et.array(arguments);if(!("console"in t)||!("log"in t.console))return t.alert(i.join("<br>"));try{return t.console.log.apply(t.console,i)}catch(n){e.each(i,function(){t.console.log(this)})}},i.ready=function(t){return"function"!=typeof t||(e.each(G,function(e,i){t.call(i,i._options)}),i.ready.callbacks.push(t)),i},i.ready.callbacks=[],i.raise=function(t,i){var n=i?"Fatal error":"Error",a={color:"#fff",position:"absolute",top:0,left:0,zIndex:1e5},o=function(t){var o='<div style="padding:4px;margin:0 0 2px;background:#'+(i?"811":"222")+';">'+(i?"<strong>"+n+": </strong>":"")+t+"</div>";e.each(Q,function(){var t=this.$("errors"),e=this.$("target");t.length||(e.css("position","relative"),t=this.addElement("errors").appendChild("target","errors").$("errors").css(a)),t.append(o)}),Q.length||e("<div>").css(e.extend(a,{position:"fixed"})).append(o).appendTo(M().body)};if(A){if(o(t),i)throw new Error(n+": "+t)}else if(i){if(K)return;K=!0,i=!1,o("Gallery could not load.")}},i.version=1.61,i.getLoadedThemes=function(){return e.map(J,function(t){return t.name})},i.requires=function(t,e){return e=e||"You need to upgrade Galleria to version "+t+" to use one or more components.",i.version<t&&i.raise(e,!0),i},i.Picture=function(t){this.id=t||null,this.image=null,this.container=et.create("galleria-image"),e(this.container).css({overflow:"hidden",position:"relative"}),this.original={width:0,height:0},this.ready=!1,this.isIframe=!1},i.Picture.prototype={cache:{},show:function(){et.show(this.image)},hide:function(){et.moveOut(this.image)},clear:function(){this.image=null},isCached:function(t){return!!this.cache[t]},preload:function(t){var i=e(new Image).on("load",function(t,e){return function(){e[t]=t}}(t,this.cache));t.srcset&&i.attr("srcset",t.srcset),t.sizes&&i.attr("sizes",t.sizes),i.attr("src",t)},load:function(n,a,o){if("function"==typeof a&&(o=a,a=null),this.isIframe){var s="if"+(new Date).getTime(),r=this.image=e("<iframe>",{src:n,frameborder:0,id:s,allowfullscreen:!0,css:{visibility:"hidden"}})[0];return a&&e(r).css(a),e(this.container).find("iframe,img").remove(),this.container.appendChild(this.image),e("#"+s).on("load",function(i,n){return function(){t.setTimeout(function(){e(i.image).css("visibility","visible"),"function"==typeof n&&n.call(i,i)},10)}}(this,o)),this.container}this.image=new Image,i.IE8&&e(this.image).css("filter","inherit"),i.IE||i.CHROME||i.SAFARI||e(this.image).css("image-rendering","optimizequality");var c=!1,l=!1,h=e(this.container),u=e(this.image),d=function(n,o,s){return function(){var r,c=function(){e(this).off("load"),n.original=a||{height:this.height,width:this.width},i.HAS3D&&(this.style.MozTransform=this.style.webkitTransform="translate3d(0,0,0)"),h.append(this),n.cache[s]=s,"function"==typeof o&&t.setTimeout(function(){o.call(n,n)},1)};this.width&&this.height?c.call(this):(r=this,et.wait({until:function(){return r.width&&r.height},success:function(){c.call(r)},error:function(){l?i.raise("Could not extract width/height from image: "+r.src+". Traced measures: width:"+r.width+"px, height: "+r.height+"px."):(e(new Image).on("load",d).attr("src",r.src),l=!0)},timeout:100}))}}(this,o,n);return h.find("iframe,img").remove(),u.css("display","block"),et.hide(this.image),e.each("minWidth minHeight maxWidth maxHeight".split(" "),function(t,e){u.css(e,/min/.test(e)?"0":"none")}),u.on("load",d).on("error",function(){c?E?e(this).attr("src",E):i.raise("Image not found: "+n):(c=!0,t.setTimeout(function(t,e){return function(){t.attr("src",e+(e.indexOf("?")>-1?"&":"?")+et.timestamp())}}(e(this),n),50))}),n.srcset&&u.attr("srcset",n.srcset),n.sizes&&u.attr("sizes",n.sizes),u.attr("src",n),this.container},scale:function(t){var a=this;if(t=e.extend({width:0,height:0,min:n,max:n,margin:0,complete:P,position:"center",crop:!1,canvas:!1,iframelimit:n},t),this.isIframe){var o,s,r=t.width,c=t.height;if(t.iframelimit){var l=$.min(t.iframelimit/r,t.iframelimit/c);l<1?(o=r*l,s=c*l,e(this.image).css({top:c/2-s/2,left:r/2-o/2,position:"absolute"})):e(this.image).css({top:0,left:0})}e(this.image).width(o||r).height(s||c).removeAttr("width").removeAttr("height"),e(this.container).width(r).height(c),t.complete.call(a,a);try{this.image.contentWindow&&e(this.image.contentWindow).trigger("resize")}catch(t){}return this.container}if(!this.image)return this.container;var h,u,d,p=e(a.container);return et.wait({until:function(){return h=t.width||p.width()||et.parseValue(p.css("width")),u=t.height||p.height()||et.parseValue(p.css("height")),h&&u},success:function(){var i=(h-2*t.margin)/a.original.width,n=(u-2*t.margin)/a.original.height,o=$.min(i,n),s=$.max(i,n),r={true:s,width:i,height:n,false:o,landscape:a.original.width>a.original.height?s:o,portrait:a.original.width<a.original.height?s:o}[t.crop.toString()],c="";t.max&&(r=$.min(t.max,r)),t.min&&(r=$.max(t.min,r)),e.each(["width","height"],function(t,i){e(a.image)[i](a[i]=a.image[i]=$.round(a.original[i]*r))}),e(a.container).width(h).height(u),t.canvas&&Y&&(Y.elem.width=a.width,Y.elem.height=a.height,c=a.image.src+":"+a.width+"x"+a.height,a.image.src=Y.cache[c]||function(t){Y.context.drawImage(a.image,0,0,a.original.width*r,a.original.height*r);try{return d=Y.elem.toDataURL(),Y.length+=d.length,Y.cache[t]=d,d}catch(t){return a.image.src}}(c));var l={},p={},f=function(t,i,n){var o=0;if(/\%/.test(t)){var s=parseInt(t,10)/100,r=a.image[i]||e(a.image)[i]();o=$.ceil(-1*r*s+n*s)}else o=et.parseValue(t);return o},g={top:{top:0},left:{left:0},right:{left:"100%"},bottom:{top:"100%"}};e.each(t.position.toLowerCase().split(" "),function(t,e){"center"===e&&(e="50%"),l[t?"top":"left"]=e}),e.each(l,function(t,i){g.hasOwnProperty(i)&&e.extend(p,g[i])}),l=l.top?e.extend(l,p):p,l=e.extend({top:"50%",left:"50%"},l),e(a.image).css({position:"absolute",top:f(l.top,"height",u),left:f(l.left,"width",h)}),a.show(),a.ready=!0,t.complete.call(a,a)},error:function(){i.raise("Could not scale image: "+a.image.src)},timeout:1e3}),this}},e.extend(e.easing,{galleria:function(t,e,i,n,a){return(e/=a/2)<1?n/2*e*e*e+i:n/2*((e-=2)*e*e+2)+i},galleriaIn:function(t,e,i,n,a){return n*(e/=a)*e+i},galleriaOut:function(t,e,i,n,a){return-n*(e/=a)*(e-2)+i}}),i.Finger=(b=i.HAS3D=function(){var t,i,n=T.createElement("p"),a=["webkit","O","ms","Moz",""],o=0,s="transform";for(M().html.insertBefore(n,null);a[o];o++)i=a[o]?a[o]+"Transform":s,void 0!==n.style[i]&&(n.style[i]="translate3d(1px,1px,1px)",t=e(n).css(a[o]?"-"+a[o].toLowerCase()+"-"+s:s));return M().html.removeChild(n),void 0!==t&&t.length>0&&"none"!==t}(),_="RequestAnimationFrame",w=t.requestAnimationFrame||t["webkit"+_]||t["moz"+_]||t["o"+_]||t["ms"+_]||function(e){t.setTimeout(e,1e3/60)},x=function(i,n){if(this.config={start:0,duration:500,onchange:function(){},oncomplete:function(){},easing:function(t,e,i,n,a){return-n*((e=e/a-1)*e*e*e-1)+i}},this.easeout=function(t,e,i,n,a){return n*((e=e/a-1)*e*e*e*e+1)+i},i.children.length){var a=this;e.extend(this.config,n),this.elem=i,this.child=i.children[0],this.to=this.pos=0,this.touching=!1,this.start={},this.index=this.config.start,this.anim=0,this.easing=this.config.easing,b||(this.child.style.position="absolute",this.elem.style.position="relative"),e.each(["ontouchstart","ontouchmove","ontouchend","setup"],function(t,e){var i;a[e]=(i=a[e],function(){i.apply(a,arguments)})}),this.setX=function(){var t=a.child.style;b?t.MozTransform=t.webkitTransform=t.transform="translate3d("+a.pos+"px,0,0)":t.left=a.pos+"px"},e(i).on("touchstart",this.ontouchstart),e(t).on("resize",this.setup),e(t).on("orientationchange",this.setup),this.setup(),function t(){w(t),a.loop.call(a)}()}},x.prototype={constructor:x,setup:function(){this.width=e(this.elem).width(),this.length=$.ceil(e(this.child).width()/this.width),0!==this.index&&(this.index=$.max(0,$.min(this.index,this.length-1)),this.pos=this.to=-this.width*this.index)},setPosition:function(t){this.pos=t,this.to=t},ontouchstart:function(t){var e=t.originalEvent.touches;this.start={pageX:e[0].pageX,pageY:e[0].pageY,time:+new Date},this.isScrolling=null,this.touching=!0,this.deltaX=0,k.on("touchmove",this.ontouchmove),k.on("touchend",this.ontouchend)},ontouchmove:function(t){var e=t.originalEvent.touches;e&&e.length>1||t.scale&&1!==t.scale||(this.deltaX=e[0].pageX-this.start.pageX,null===this.isScrolling&&(this.isScrolling=!!(this.isScrolling||$.abs(this.deltaX)<$.abs(e[0].pageY-this.start.pageY))),this.isScrolling||(t.preventDefault(),this.deltaX/=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0?$.abs(this.deltaX)/this.width+1.8:1,this.to=this.deltaX-this.index*this.width),t.stopPropagation())},ontouchend:function(t){this.touching=!1;var e=+new Date-this.start.time<250&&$.abs(this.deltaX)>40||$.abs(this.deltaX)>this.width/2,i=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0;this.isScrolling||this.show(this.index+(e&&!i?this.deltaX<0?1:-1:0)),k.off("touchmove",this.ontouchmove),k.off("touchend",this.ontouchend)},show:function(t){t!=this.index?this.config.onchange.call(this,t):this.to=-t*this.width},moveTo:function(t){t!=this.index&&(this.pos=this.to=-t*this.width,this.index=t)},loop:function(){var t=this.to-this.pos,e=1;if(this.width&&t&&(e=$.max(.5,$.min(1.5,$.abs(t/this.width)))),this.touching||$.abs(t)<=1)this.pos=this.to,t=0,this.anim&&!this.touching&&this.config.oncomplete(this.index),this.anim=0,this.easing=this.config.easing;else{this.anim||(this.anim={start:this.pos,time:+new Date,distance:t,factor:e,destination:this.to});var i=+new Date-this.anim.time,n=this.config.duration*this.anim.factor;if(i>n||this.anim.destination!=this.to)return this.anim=0,void(this.easing=this.easeout);this.pos=this.easing(null,i,this.anim.start,this.anim.distance,n)}this.setX()}},x),e.fn.galleria=function(t){var n=this.selector;return e(this).length?this.each(function(){e.data(this,"galleria")&&(e.data(this,"galleria").destroy(),e(this).find("*").hide()),e.data(this,"galleria",(new i).init(this,t))}):(e(function(){e(n).length?e(n).galleria(t):i.utils.wait({until:function(){return e(n).length},success:function(){e(n).galleria(t)},error:function(){i.raise('Init failed: Galleria could not find the element "'+n+'".')},timeout:5e3})}),this)},i})});
